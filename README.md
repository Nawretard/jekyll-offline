# Jekyll Offline - Turn any Jekyll site into an offline application with relative links

### Personal note
This repository is a fork waiting to (maybe) be merged to the first repository [Jekyll Offline](https://dohliam.github.io/jekyll-offline) created.

It fixes the undefined method `encode' for URI:Module from the other repository (it was deprecated).

The code is a bit simplified so it should be easier to maintain, but I could have broken things, feel free to add issues and pull requests if you want to correct problems.

Also I didn't understand every argument of the original config file, so maybe there are less features.

## Jekyll Offline
Creates a copy of a specified Jekyll-based website and rewrites all internal links as relative URLs so that the site can be viewed from a local machine without the need for Internet access.

All we need is the `_site` folder generated by Jekyll during a build for this script to work.

Typically, Jekyll sites can be viewed either by uploading the generated site files to a remote server or locally using the `jekyll serve` command, which temporarily hosts the site on a local server.

As Jekyll is a static site generator, page references can easily be replaced by local references. This ensures that local pages are always linked offline.

With Jekyll Offline, we modify all resources and links according to the url of the Jekyll-based website, so external links (http requests not linked to the original website or e-mails) keep working.

## Requirements

The script (`main.rb`) can be used directly and does not need to be installed. There are no prerequisites other than [Ruby](https://www.ruby-lang.org/).

If you have the source code for a Jekyll site that has not been generated yet, you will need to [install Jekyll](https://jekyllrb.com/) first and then build the site:

```
    cd my_jekyll_site/
    jekyll build
```


## Usage

### Demo
Clone or download the repository and enter the following command in a terminal from within the repo main directory:

    `./main.rb demo.yml`

You just created a new folder : `demo_offline` in the same directory. 

This folder has the same structure as your source directory and is an offline version of the default Jekyll demo site. 

### Your Site

To create your own new offline site, add your variables in the `config.yml`:
  - `source` : the path to the _site
  - `target` : you will create your site offline version inside this directory
  - `site_url` : url of the original site (it doesn't have to be up, we only remove this url inside the hrefs of `<link/>` html elements)

Now you can run the script :
    `./main`

The configuration file is`config.yml` by default, you don't need to specify it unless you use another file.

**Warning:** the `source` attribute path has to be the generated `_site` folder and not the unprocessed Jekyll source code.
If you don't have it yet, simply use `jekyll build` at the root of your directory.

## Library

The methods in the `html_to_offline.rb` library may be useful for relativizing links more generally in HTML pages other than Jekyll sites.

It is extremely useful to have an offline version of a website that can work without an Internet connection or a local server, so it was quite surprising to find that a library to do this did not already exist.

This script has been used to create fully-functional offline versions of the [Global Storybooks](https://globalstorybooks.net) websites.

## Issues

A lot of code has changed, so maybe the previous issues don't apply anymore. If you encounter an issue, create an issue and maybe someone will resolve it !

## Contributing

If you encounter any problems while converting a Jekyll site, please open an issue, ideally with a link to the source code of the website in question. PRs are also always welcome!

## License

MIT.

### Personal note:
I'm novice so I don't know what is allowed.

Based on [This article](https://www.gnu.org/philosophy/open-source-misses-the-point.en.html) I would like to license this fork under GPLv3 if it's possible.
